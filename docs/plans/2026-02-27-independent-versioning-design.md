# Independent Package Versioning with Changesets

## Problem

All 4 packages (`core`, `react`, `svelte`, `vanilla`) share a single version bumped together. A change to vanilla shouldn't require bumping core.

## Solution

Adopt `@changesets/cli` for independent versioning with automated GitHub Actions publishing via `changesets/action`.

## Configuration

`.changeset/config.json`:
- `fixed: []` — each package versions independently
- `linked: []` — adapters don't force-bump together
- `updateInternalDependencies: "patch"` — core bump triggers adapter patch bumps (keeps peer dep ranges in sync)
- `ignore: ["dnd-block-tree-demo"]` — private demo app excluded
- `access: "public"` — all packages publish to public npm
- `baseBranch: "main"`

## Developer Workflow

1. Make changes, run `npx changeset` to create a changeset file (which packages, semver type, summary)
2. Commit changeset file with PR
3. On merge to main, changesets/action opens a "Version Packages" PR that bumps versions and generates per-package changelogs
4. Merging the Version PR triggers `changeset publish` — only changed packages are published

## GitHub Actions Changes

**Replace** `.github/workflows/publish.yml`:
- Trigger: push to main (instead of GitHub Release)
- Single job using `changesets/action@v1`
- Handles both version PR creation and npm publishing
- `changeset publish` respects package dependency ordering automatically
- OIDC provenance retained for npm publish

**Keep** `.github/workflows/ci.yml` unchanged (build/test/typecheck on PRs).

## Changelogs

- Per-package `packages/{name}/CHANGELOG.md` generated by changesets
- Root `CHANGELOG.md` archived (kept for history, no longer updated)

## Migration

- No version changes — all packages stay at 2.3.0
- First changeset after setup produces the next bump for its target package(s)

## Files Changed

1. Install `@changesets/cli` as dev dependency
2. Create `.changeset/config.json`
3. Create `.changeset/README.md` (standard changesets readme)
4. Replace `.github/workflows/publish.yml` with changesets-based workflow
5. Add `"changeset": "changeset"` script to root package.json
